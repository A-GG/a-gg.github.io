{"componentChunkName":"component---src-templates-blog-post-tsx-content-file-path-content-blog-cent-os部署-gogs-搭建私有-git服务器-md","path":"/CentOS部署Gogs-搭建私有Git服务器/","result":{"data":{"site":{"siteMetadata":{"title":"Wizard's Lair","postCopyright":true,"siteUrl":"https://wizd.dev","author":{"name":"w1zd"}}},"mdx":{"id":"ddb911ab-f096-58cb-b371-b504fdabb3ad","excerpt":"一般公司都需要有自己的私有源代码托管服务，而SVN这种东西又不太好用，应该算是已经过时了吧（我自己瞎BB一下就好，求大家别打脸）。 GitHub挺好用的，但是服务器再国外，而且创建私有库是需要软妹币的。 GitLab也可以用来部署私有Git服务器，后续如果有机会我再发一篇教程出来。 今天呢，简单的介绍一款极易搭建的自助…","body":"\n\n一般公司都需要有自己的私有源代码托管服务，而SVN这种东西又不太好用，应该算是已经过时了吧（我自己瞎BB一下就好，求大家别打脸）。\nGitHub挺好用的，但是服务器再国外，而且创建私有库是需要软妹币的。\nGitLab也可以用来部署私有Git服务器，后续如果有机会我再发一篇教程出来。\n\n今天呢，简单的介绍一款极易搭建的自助 Git 服务: [Gogs](https://github.com/gogs/gogs)的安装和使用\n\n## 第一步：准备依赖环境\n* [安装和配置MySQL](https://github.com/a-gg/a-gg.github.io/issues/2)\n* 创建用户及用户组`git`\n```bash\ngroupadd git\nuseradd -g git git\n```\n* 安装git，这个简单`yum groupinstall \"Development tools\"`\n\n## 第二步：下载Gogs解压二进制包\n下载地址:[https://gogs.io/docs/installation/install_from_binary.html](https://gogs.io/docs/installation/install_from_binary.html)\n```bash\nwget https://dl.gogs.io/0.11.86/gogs_0.11.86_linux_amd64.tar.gz\n```\n解压：\n```bash\ntar -xvf gogs_0.11.86_linux_amd64.tar.gz\n```\n\n## 第三步：添加Gogs到系统服务\n在gogs文件夹下面，已经提供了相应的模板文件`gogs/scripts/systemd/gogs.service`\n\n我们需要将其复制到`/etc/systemd/system`目录下：\n```bash\ncp scripts/systemd/gogs.service /etc/systemd/system;\n```\n\n修改内容\n```bash\nvi /etc/systemd/system/gogs.service;\n```\n修改数据库，因为我们选择使用的MySQL所以将`After`修改成MySQL\n```\nAfter=mysqld.service\n```\n\n注释掉`Restart=always`(这一步是可选的，因为我自己在安装完成之后启动报错了，所以进行了如下的修改，如果你安装启动没问题，那么下面这一步，你可以不做)：\n```\n#Restart=always\n```\n\n注意看配置文件里的这个配置项：`ExecStart=/home/git/gogs/gogs web`\n所以，我们需要把自己下载的gogs文件夹移动到git目录下，或者直接将这里路径改成自己需要的路径\n```bash\nmv gogs /home/git\n```\n\n激活服务：\n```bash\nsystemctl enable gogs\n```\n\n## 创建数据库\n在Gogs文件夹内也提供了相应的创建数据库的文件`mysqls.sql`，直接使用即可\n```bash\nmysql -uroot -p < scripts/mysql.sql\n```\n\n## 启动Gogs\n```bash\nsystemctl start gogs\n```\n\n## 访问并进行设置安装\n启动成功之后，可以使用[域名:3000](http://域名:3000)\n\n成功打开页面之后，需要进行简单的设置，即可使用。\n\n## 相关配置\n在使用Gogs之后我们需要进行简单的配置\n配置文件路径为： `custom/conf/app.ini`\n\n打开你就基本能看懂什么是什么了。\n这里面要改的：\n```ini\nAPP_NAME = Gogs\nRUN_USER = git\nRUN_MODE = prod\n\n[database]\nDB_TYPE  = mysql\nHOST     = 127.0.0.1:3306\nNAME     = gogs\nUSER     = root\nPASSWD   = 123456\nSSL_MODE = disable\nPATH     = data/gogs.db\n\n[repository]\nROOT = /home/git/gogs-repositories\n\n[server]\nDOMAIN           = localhost  这要改，改成自己域名\nHTTP_PORT        = 3000\nROOT_URL         = http://localhost:3000  这里也要改成自己域名\nDISABLE_SSH      = false\nSSH_PORT         = 22  在启用ssh的时候，这个端口一般都需要更改，否则gogs服务无法启动\nSTART_SSH_SERVER = false  这里要改成true, 否则ssh链接无法使用\nOFFLINE_MODE     = false\n\n[mailer]\nENABLED = false\n\n[service]\nREGISTER_EMAIL_CONFIRM = false\nENABLE_NOTIFY_MAIL     = false\nDISABLE_REGISTRATION   = false\nENABLE_CAPTCHA         = true\nREQUIRE_SIGNIN_VIEW    = false\n\n[picture]\nDISABLE_GRAVATAR        = false\nENABLE_FEDERATED_AVATAR = false\n\n[session]\nPROVIDER = file\n\n[log]\nMODE      = file\nLEVEL     = Info\nROOT_PATH = /home/git/gogs/log\n\n[security]\nINSTALL_LOCK = true\nSECRET_KEY   = xxxx\n\n```","fields":{"slug":"/CentOS部署Gogs-搭建私有Git服务器/"},"frontmatter":{"title":"CentOS部署Gogs-搭建私有Git服务器","date":"March 12, 2019","description":"简单的介绍一款极易搭建的自助 Git 服务: Gogs的安装和使用","categories":["技术文章"],"tags":["CentOS","Linux","Gogs"],"toc":true}}},"pageContext":{"slug":"/CentOS部署Gogs-搭建私有Git服务器/","previous":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/Kali Linux可用软件源汇总.md"},"fields":{"slug":"/Kali Linux可用软件源汇总/"},"frontmatter":{"title":"Kali Linux可用软件源汇总"}},"next":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/CentOS使用yum安装MySQL.md"},"fields":{"slug":"/CentOS使用yum安装MySQL/"},"frontmatter":{"title":"CentOS使用yum安装MySQL"}},"frontmatter":{"title":"CentOS部署Gogs-搭建私有Git服务器","date":"2019-03-12T23:00:23.284Z","tags":["CentOS","Linux","Gogs"],"categories":["技术文章"],"description":"简单的介绍一款极易搭建的自助 Git 服务: Gogs的安装和使用","toc":true}}},"staticQueryHashes":["2786614800","3000541721","3828236571"],"slicesMap":{}}