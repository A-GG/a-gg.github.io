{"componentChunkName":"component---src-templates-blog-post-tsx-content-file-path-content-blog-uefi-bios下-windows系统的安装-md","path":"/UEFI-BIOS下Windows系统的安装/","result":{"data":{"site":{"siteMetadata":{"title":"Wizard's Lair","postCopyright":true,"siteUrl":"https://wizd.dev","author":{"name":"w1zd"}}},"mdx":{"id":"d299a77b-5731-5b69-8e89-de156f887cd3","excerpt":"同事昨天入手一个ASUS F450V，预装的Windows8.0，然后硬盘分区只有两个，只有C、D两个盘符，一般人都习惯分好几盘符对日常的应用程序以及文件进行管理，所以他决定重装系统。 我不出意外的接到了这个光荣而艰巨的使命，本以为就跟往常一样，只要插上硬盘，进入PE，然后装完重启就万事OK了。。。 Too young…","body":"同事昨天入手一个ASUS F450V，预装的Windows8.0，然后硬盘分区只有两个，只有C、D两个盘符，一般人都习惯分好几盘符对日常的应用程序以及文件进行管理，所以他决定重装系统。\n我不出意外的接到了这个光荣而艰巨的使命，本以为就跟往常一样，只要插上硬盘，进入PE，然后装完重启就万事OK了。。。\n**Too young too naive!!!**\n \n## U盘和移动硬盘的启动问题\n### 初遇问题\n第一个问题是什么呢。装有PE的移动硬盘在启动项内找不到。  \n\nUSB3.0的口和USB2.0的口换着插，仍然没有出来。可能是BIOS不识别我的硬盘，那我找个U盘来试试。。。果真，U盘插着奏效了，我能看见在启动项里面的U盘了。按动方向键，选中U盘，回车。。。。黑屏，然后就进原装Win8了。。。  \n\n擦擦擦，这是啥情况，U盘的PE坏了？？？\n换台电脑试试，用Acer 4743G试了下，大爷的，秒进PE，那看来不是U盘PE的问题。问题到底出在哪里了？\n\n后来经过不懈的爬贴，我知道了`UEFI`这个东西\n### 问题解决\n`UEFI`：全称“统一的可扩展固件接口”(Unified Extensible Firmware Interface)是一种详细描述类型接口的标准。  \n\n百度百科说的挺详尽的，不过我看了也是一知半解，我们就暂时当他是BIOS的进化产物吧。\n\nU盘和移动硬盘之所以在选择启动项的时候无效是因为BIOS设置里面的 Lunch CSM没开启，这又是个啥？\n\n`CSM`全名`Compatibility Support Module`即兼容性支持模块，是UEFI的一个特殊模块，对于不支持UEFI的系统提供兼容性支持。目前Windows8完全支持UEFI，Windows7的64位不完全支持UEFI。因此`UEFI BIOS`下安装Windows7必须开启`CSM`，多数电脑能自动或手动开启，少数电脑则强制关闭`CSM`。\n但是我发现在boot选项卡里，这个东西是灰色的，不能设置的，然后又爬啊爬，终于找到了。\n\n必须禁用`Secure Boot`。只有禁用了这个东西，`Lunch CSM`选项才可操作。把Lunch CSM设置为Enable之后，我的移动硬盘PE终于可以进去了。\n### UEFI装系统的问题\n进去之后，我给硬盘分区什么的一气呵成，然后唰唰的把系统装进了C盘，就在我满心欢喜，等到电脑重启的那一刻- -，我的心碎了。。。\n显示`IMAGE00`\n**WTF!!! Are you kidding me???**\n好吧，我继续找。。。是什么问题。。。\n原来，在用Disk Genius 创建分区的时候，我就应该注意到，他让我创建 ESP分区和MRS分区，我没注意就直接点过去了，而且在分完区之后，没有主分区和逻辑分区之分，我隐隐的感觉到要出错。。。\n果不其然，上天总是在你感觉你要出事的时候就让你出事- –\n原来UEFI装系统的节奏跟之前我们装系统的节奏完全没在一个调上~~~\n重来吧。。。\n又是无尽的爬贴，在爬贴之后故事总算终结了。\n\n\n##总结\n***UEFI装系统不同于以往的装系统，应按照以下步骤循序操作。***\n\n1. 在BIOS Security设置中，将ScureBoot设置为Disabeled\n2. 在BIOS Boot设置中，将Lunch CSM设置为Enabled\n3. 需要一个4G以上的U盘，将其格式化为FAT32格式，并将系统安装包解压到U盘根目录\n4. 下载EFI Shell(百度资源挺丰富)，解压到U盘根目录\n5. （找不到U盘的看这一步），在系统内分一个4G以上的盘格式化为Fat32，操作跟3，4步相同（这一步可以在原系统内进行，也可在PE中进行）\n6. 如果你有PE那就进入PE给电脑硬盘分区， 分区格式应为GPT格式，ESP和MSR分区也不能少\n7. 如果你没有PE，就接着往下看\n8. 重启电脑，进入BIOS，在SAVE&EXIT中选择 Launch EFI Shell from filesystem device\n9. 启动之后会进入EFI Shell，界面类似于DOS\n10. 输入 “fs0:” ，然后输入 “dir”，如果看到的文件夹是你刚才解压的文件夹，那分区就对了，如果不是，那就fs1:  fs2: fs3 依次往后找，找到为止\n11. 依次输入“cd efi”，“cd boot”，“bootx64.efi”\n12. 然后你就会看到正常的windows 8的启动画面，然后就正常安装就好了。\n13. 因为之前你没有进行分区，所以到了选择分区那一步的时候停止，按Shift+F10打开命令提示符\n14. 你要在这里为你的磁盘进行分区，输入“diskpart”打开diskpart工具\n15. 输入“list disk”，显示所有的磁盘\n16. 输入“select disk 0”，选择0号磁盘，这个磁盘号自己根据磁盘的大小来区分是不是目标磁盘\n17. 输入“clean”，清除磁盘，这个命令会清空磁盘的所有数据（谨慎操作）\n18. 输入“convert gpt”，将磁盘转换成gpt分区\n19. 输入“listpartition”，列出磁盘上所有的分区，因为刚才进行过GPT格式转换，所以这个应该为空\n20. 输入“create partition efi size=200”，建立EFI（ESP）分区，大小为200M\n21. 输入“create partition msr size=128”，建立MSR分区，微软默认建立的话，大小是128M\n22. 输入“create partition primary size=51200”，建立主分区，大小为50G（这个大小单位为MB，自己根据需求进行调整）\n23. 然后可以再次执行20步的内容，根据需求进行其他分区的创建\n24. 关闭命令提示符，点击刷新\n25. 然后正常的安装步骤一路向西\n26. 装完系统之后， 如果你不是用U盘装的，需要用工具把装系统时新建出来的4G的盘给合并到其他盘\n27. 最后回BIOS中对设置进行还原，不还原可能会出现 secure boot 未正确配置","fields":{"slug":"/UEFI-BIOS下Windows系统的安装/"},"frontmatter":{"title":"UEFI BIOS下Windows系统的安装","date":"April 30, 2014","description":null,"categories":["技术文章"],"tags":["装机","UEFI"],"toc":true}}},"pageContext":{"slug":"/UEFI-BIOS下Windows系统的安装/","previous":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/C-根据属性名称获取属性值.md"},"fields":{"slug":"/C-根据属性名称获取属性值/"},"frontmatter":{"title":"C#根据属性名称获取属性值"}},"next":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/jQuery中的prop和attr.md"},"fields":{"slug":"/jQuery中的prop和attr/"},"frontmatter":{"title":"jQuery中的prop和attr"}},"frontmatter":{"title":"UEFI BIOS下Windows系统的安装","date":"2014-04-30T18:02:43.284Z","tags":["装机","UEFI"],"categories":["技术文章"],"toc":true}}},"staticQueryHashes":["2786614800","3000541721","3828236571"],"slicesMap":{}}