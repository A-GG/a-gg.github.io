{"componentChunkName":"component---src-templates-blog-post-tsx-content-file-path-content-blog-authorzied-key配置小记-mdx","path":"/AuthorziedKey配置小记/","result":{"data":{"site":{"siteMetadata":{"title":"Wizard's Lair","postCopyright":true,"siteUrl":"https://wizd.dev","author":{"name":"w1zd"}}},"mdx":{"id":"700b447f-601f-537b-81c8-6b3822284133","excerpt":"早上起床发现 VPS 突然无法访问了，后来在 TG 群里了解到是因为厂商做母鸡迁移导致文件损坏，可以提工单等待修复。工作需要使用外网，而小作坊的工单处理速度可想而知，考虑到反正服务器内存储的内容并不是很多，且都有备份，就着手直接重装。 当一切都准备就绪之后，发现配置了 authorized_keys 之后…","body":"\n早上起床发现 VPS 突然无法访问了，后来在 TG 群里了解到是因为厂商做母鸡迁移导致文件损坏，可以提工单等待修复。工作需要使用外网，而小作坊的工单处理速度可想而知，考虑到反正服务器内存储的内容并不是很多，且都有备份，就着手直接重装。\n\n当一切都准备就绪之后，发现配置了 authorized_keys 之后，免密访问依然无法使用，在进行一系列的问题探究之后，发现很可能是创建 authorized_keys 文件的姿势不对。\n\n使用 touch 创建的文件，默认权限是 644 如下：\n```\n$ls -al\n-rw-r--r--. 1 root root    0 Jul  16 07:49 authorized_keys\n```\n但是 ssh 要求的权限为 600, 故需要对其进行修改\n```\n$chmod 600 .ssh/authorized_keys\n$ls -al\n-rw-------. 1 root root    0 Jul  16 07:50 authorized_keys\n```\n\n这样操作之后，免密登录就完全正常了。\n\n### SCP 命令直接追加 authorized_keys \n\n有朋友问怎么能直接一步到位把公钥添加到 authorized_keys 里去，特别简单。\n\n```bash\nssh user@hostname 'cat >> .ssh/authorized_keys' < ~/.ssh/id_rsa.pub\n```","fields":{"slug":"/AuthorziedKey配置小记/"},"frontmatter":{"title":"AuthorziedKey配置小记","date":"July 17, 2021","description":"authorized_keys 配置之后，依然无法实现免密登录，让人摸不着头脑。","categories":["技术文章"],"tags":["CentOS","Linux"],"toc":null}}},"pageContext":{"slug":"/AuthorziedKey配置小记/","previous":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/2021年如何在OSX上安装PIP2.mdx"},"fields":{"slug":"/2021年如何在OSX上安装PIP2/"},"frontmatter":{"title":"2021年如何在OSX上安装PIP2"}},"next":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/Vue中的Global-Event-Bus.mdx"},"fields":{"slug":"/Vue中的Global-Event-Bus/"},"frontmatter":{"title":"Vue2 中的 Global Event Bus"}},"frontmatter":{"title":"AuthorziedKey配置小记","date":"2021-07-17T16:54:17.284Z","tags":["CentOS","Linux"],"categories":["技术文章"],"description":"authorized_keys 配置之后，依然无法实现免密登录，让人摸不着头脑。"}}},"staticQueryHashes":["2786614800","3000541721","3828236571"],"slicesMap":{}}