{"componentChunkName":"component---src-templates-blog-post-tsx-content-file-path-content-blog-在-gatsby-mdx-中使用-la-te-x-mdx","path":"/在-Gatsby-MDX-中使用-LaTeX/","result":{"data":{"site":{"siteMetadata":{"title":"Wizard's Lair","postCopyright":true,"siteUrl":"https://wizd.dev","author":{"name":"w1zd"}}},"mdx":{"id":"c3656c11-66b8-59f4-a69a-c33880478b6d","excerpt":"LaTeX\\huge{\\LaTeX}LATE​X 年初把博客更新了成用 gatsby-plugin-mdx 处理 mdx 文件来生成页面。在更新前，解析 Markdown 文件中的 LaTeX\\LaTeX{}LATE​X 公式使用的是 gatsby-remark-katex 插件，这个插件和 gatsby…","body":"\n$$\n\\huge{\\LaTeX}\n$$\n\n年初把博客更新了成用 [gatsby-plugin-mdx](https://www.npmjs.com/package/gatsby-plugin-mdx) 处理 [mdx 文件](https://mdxjs.com/)来生成页面。在更新前，解析 Markdown 文件中的 $\\LaTeX{}$ 公式使用的是 [gatsby-remark-katex](https://www.npmjs.com/package/gatsby-remark-katex) 插件，这个插件和 [gatsby-transformer-remark](https://www.npmjs.com/package/gatsby-transformer-remark) 配合挺好用的，但是当我更新成 MDX 之后就没法正常工作了，所以本文简单记录下解决方案。\n\n## 用到的插件\n* [remark-math@v3](https://www.npmjs.com/package/remark-math)\n* [rehype-katex@v3](https://www.npmjs.com/package/rehype-katex)\n\n这里我标注了插件版本，大家在使用的时候需要下载相应版本，版本过高会导致插件不起作用，粗略探索了一下，大致是因为 `gatsby-plugin-mdx` 依赖的 `mdx-js` 版本比较低导致的。\n\n```shell\nyarn add remark-math@v3 rehype-katex@v3\n```\n\n## 配置方式\n\n1. 在 gatsby-config.js 中配置插件\n```javascript\n//gatsby-config.js\n\n// 插件版本过高的话，这里也会提示不让用require引用，需要使用import\nconst remarkMath = require('remark-math')\nconst rehypeKatex = require('rehype-katex')\n\nmodule.exports = {\n  // ...\n  plugins: [\n    // ...\n    {\n      resolve: `gatsby-plugin-mdx`,\n      options: {\n        extensions: [`.mdx`, `.md`],\n        remarkPlugins: [remarkMath],\n        rehypePlugins: [rehypeKatex],\n        gatsbyRemarkPlugins: [\n          {\n            resolve: `gatsby-remark-images`,\n            options: {\n              maxWidth: 960,\n              quality: 90,\n              linkImagesToOriginal: false,\n            },\n          },\n        ],\n      },\n    },\n   ],\n}\n```\n2. 在 gatsby-browser.js 中引用 Katex 的 css 样式\n\n因为上面两个插件只是单纯的帮我们将 LaTeX 公式转成了相应的 HTML 元素，我们需要使用 Katex 的样式，这样 LaTeX 公式才能正常 render。\n\n```javascript\n// gatsby-browser.js\n// ...\nimport \"katex/dist/katex.min.css\"\n// ...\n```\n\n## 示例\n进行配置之后，我们就可以在 mdx 文件中书写相应的 LaTeX 内容了，插件可以解析行内和块两种写法。\n\n### 行内写法示例\n```markdown\n这是一个行内 $\\LaTeX$ 公式, $i\\hbar\\frac{\\partial \\varphi } {\\partial {t}} = \\frac{-\\hbar^2}{2m} \n\\left( \\frac{\\partial^2}{\\partial x^2} + \\frac{\\partial^2}{\\partial y^2} + \n\\frac{\\partial^2}{\\partial z^2} \\right) \\varphi  + V \\varphi$\n```\n这是一个行内 $\\LaTeX$ 公式, $i\\hbar\\frac{\\partial \\varphi } {\\partial {t}} = \\frac{-\\hbar^2}{2m} \\left( \\frac{\\partial^2}{\\partial x^2} + \\frac{\\partial^2}{\\partial y^2} + \\frac{\\partial^2}{\\partial z^2} \\right) \\varphi  + V \\varphi$\n\n### 块写法示例\n```markdown\n下面是一个 $\\LaTeX$ 公式块:\n\n$$\n\\int_{x^2 + y^2 \\leq R^2}   f(x,y) dx dy = \n\\int_{\\theta=0}^{2\\pi}    \\int_{r=0}^R    f(r\\cos\\theta,r\\sin\\theta) r dr d\\theta\n$$\n```\n\n下面是一个 $\\LaTeX$ 公式块:\n$$\n\\int_{x^2 + y^2 \\leq R^2}   f(x,y) dx dy = \n\\int_{\\theta=0}^{2\\pi}    \\int_{r=0}^R    f(r\\cos\\theta,r\\sin\\theta) r dr d\\theta\n$$\n","fields":{"slug":"/在-Gatsby-MDX-中使用-LaTeX/"},"frontmatter":{"title":"在 Gatsby MDX 中使用 LaTeX","date":"May 12, 2022","description":"在 Gatsby 中使用 MDX 提供了极强的扩展性，但是如果使用 gatsby-plugin-mdx 的话 gatsby-remark-katex 插件就无法使用了，那如何在 MDX 中处理 LaTeX 内容呢？本文将做简要说明。","categories":["技术文章"],"tags":["Gatsby"],"toc":null}}},"pageContext":{"slug":"/在-Gatsby-MDX-中使用-LaTeX/","previous":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/Vue中的Global-Event-Bus.mdx"},"fields":{"slug":"/Vue中的Global-Event-Bus/"},"frontmatter":{"title":"Vue2 中的 Global Event Bus"}},"next":{"internal":{"contentFilePath":"/home/runner/work/w1zd.github.io/w1zd.github.io/content/blog/NAND-as-Universal-Gate.mdx"},"fields":{"slug":"/NAND-as-Universal-Gate/"},"frontmatter":{"title":"NAND as Universal Gate"}},"frontmatter":{"title":"在 Gatsby MDX 中使用 LaTeX","date":"2022-05-12T11:24:17.284Z","tags":["Gatsby"],"categories":["技术文章"],"description":"在 Gatsby 中使用 MDX 提供了极强的扩展性，但是如果使用 gatsby-plugin-mdx 的话 gatsby-remark-katex 插件就无法使用了，那如何在 MDX 中处理 LaTeX 内容呢？本文将做简要说明。"}}},"staticQueryHashes":["2786614800","3000541721","3828236571"],"slicesMap":{}}